"use strict";
/* eslint-disable @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-explicit-any, @typescript-eslint/restrict-plus-operands */
// lovingly borrowed from Eris
// https://github.com/abalabahaha/eris/blob/master/lib/util/MultipartData.js
Object.defineProperty(exports, "__esModule", { value: true });
class MultipartData {
    boundary = "----E621Multipart";
    bufs = [];
    attach(fieldName, data, filename) {
        if (data === undefined) {
            return;
        }
        let str = "\r\n--" + this.boundary + "\r\nContent-Disposition: form-data; name=\"" + fieldName + "\"";
        if (filename) {
            str += "; filename=\"" + filename + "\"";
        }
        if (ArrayBuffer.isView(data)) {
            str += "\r\nContent-Type: application/octet-stream";
            if (!(data instanceof Uint8Array)) {
                data = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);
            }
        }
        else if (typeof data === "object") {
            str += "\r\nContent-Type: application/json";
            data = Buffer.from(JSON.stringify(data));
        }
        else {
            data = Buffer.from("" + data);
        }
        this.bufs.push(Buffer.from(str + "\r\n\r\n"));
        this.bufs.push(data);
    }
    finish() {
        this.bufs.push(Buffer.from("\r\n--" + this.boundary + "--"));
        return this.bufs;
    }
}
exports.default = MultipartData;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTXVsdGlwYXJ0RGF0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlsL011bHRpcGFydERhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHlJQUF5STtBQUN6SSw4QkFBOEI7QUFDOUIsNEVBQTRFOztBQUU1RSxNQUFxQixhQUFhO0lBQ2pDLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQztJQUMvQixJQUFJLEdBQWtCLEVBQUUsQ0FBQztJQUV6QixNQUFNLENBQUMsU0FBaUIsRUFBRSxJQUFTLEVBQUUsUUFBaUI7UUFDckQsSUFBSSxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQ3ZCLE9BQU87U0FDUDtRQUNELElBQUksR0FBRyxHQUFHLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLDZDQUE2QyxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDdEcsSUFBSSxRQUFRLEVBQUU7WUFDYixHQUFHLElBQUksZUFBZSxHQUFHLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FDekM7UUFDRCxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDN0IsR0FBRyxJQUFJLDRDQUE0QyxDQUFDO1lBQ3BELElBQUksQ0FBQyxDQUFDLElBQUksWUFBWSxVQUFVLENBQUMsRUFBRTtnQkFDbEMsSUFBSSxHQUFHLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7YUFDckU7U0FDRDthQUFNLElBQUksT0FBTyxJQUFJLEtBQUssUUFBUSxFQUFFO1lBQ3BDLEdBQUcsSUFBSSxvQ0FBb0MsQ0FBQztZQUM1QyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDekM7YUFBTTtZQUNOLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztTQUM5QjtRQUNELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEIsQ0FBQztJQUVELE1BQU07UUFDTCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDN0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ2xCLENBQUM7Q0FDRDtBQS9CRCxnQ0ErQkMifQ==